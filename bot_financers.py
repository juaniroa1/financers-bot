import streamlit as st

st.title("Asesor Virtual - FINANCERS")

st.markdown("Ayudamos a extranjeros a operar legalmente en EE.UU. con soluciones simples, seguras y claras.")
st.markdown("Seleccion√° el servicio sobre el cual quer√©s recibir informaci√≥n:")

intencion = st.selectbox("¬øC√≥mo podemos ayudarte?", [
    "", "Abrir una LLC", "Declarar impuestos", "Abrir una cuenta bancaria", "Enviar una consulta personalizada", "¬øQui√©nes somos?", "Preguntas frecuentes", "No s√© por d√≥nde empezar"
])

estado = tipo = None

respuestas = {
    "llc_florida_single": "- Costo total estimado: USD 739\n- Ideal para inversiones inmobiliarias y apertura de cuenta bancaria\n- Buena reputaci√≥n legal y reconocimiento internacional\n- Atenci√≥n: puede aplicar Estate Tax (hasta 40%) si no se usa una estructura offshore\n\n**PDF sugerido:** Presupuesto SM - Florida.pdf\n**Art√≠culo:** https://www.financers.com.ar/estructura-en-bvi-para-evitar-el-estate-inheritance-tax-en-usa/\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "llc_florida_multi": "- Costo estimado: USD 1040\n- Requiere Formulario 1065 + K-1 por socio\n- Recomendamos estructura offshore si hay real estate y socios extranjeros\n\n**PDF sugerido:** Presupuesto MM - Florida.pdf\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "llc_new_mexico_single": "- Costo estimado: USD 589\n- No requiere publicaci√≥n de miembros\n- Ideal para freelancers, consultores y operaciones online\n- Mantenimiento anual bajo\n\n**PDF sugerido:** Presupuesto SM - New Mexico.pdf\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "llc_new_mexico_multi": "- Costo estimado: USD 700\n- Incluye cuenta bancaria y encuestas obligatorias\n- Declaraci√≥n IRS: USD 800\n- PDF: Presupuesto MM - New Mexico\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "llc_delaware_single": "- Costo estimado: USD 739\n- Prestigio legal a nivel internacional\n- Recomendado para startups, tecnolog√≠a y negocios con socios\n\n**PDF sugerido:** Presupuesto SM - Delaware.pdf\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "llc_delaware_multi": "- Costo estimado: USD 1400\n- Incluye cuenta bancaria y encuestas obligatorias\n- Declaraci√≥n IRS: USD 800\n- PDF: Presupuesto MM - Delaware\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "llc_wyoming_single": "- Costo estimado: USD 500\n- Privacidad y costos anuales bajos\n- Impuesto estatal: USD 62\n- Declaraci√≥n IRS: USD 500\n- PDF: Presupuesto SM - Wyoming\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "llc_wyoming_multi": "- Costo estimado: USD 800\n- Agente registrado: USD 100\n- Impuesto estatal: USD 62\n- PDF: Presupuesto MM - Wyoming\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "impuestos_single": "- Formulario 5472 + libro contable obligatorio\n- Si hubo ingresos, presentar Schedule C\n- Multa por no presentar: hasta USD 25.000\n- Tiempo estimado: 3 a 5 d√≠as h√°biles\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "impuestos_multi": "- Formulario 1065 obligatorio\n- Cada socio debe recibir un K-1\n- W-8BEN-E si los socios son extranjeros\n- Multa por no presentar: USD 210 por socio por mes\n**Agend√° tu llamada:** https://calendly.com/financers/llamada",
    "cuenta_sin_llc": "- Requiere LLC + EIN\n- Podemos ayudarte a abrir cuenta en Mercury, Relay o bancos f√≠sicos\n- Si no ten√©s estructura, sugerimos abrir primero una LLC\n**Agend√° tu llamada:** https://calendly.com/financers/llamada"
}

if intencion == "¬øQui√©nes somos?":
    st.subheader("¬øQui√©nes somos en FINANCERS?")
    st.markdown("""
Somos un equipo contable-financiero offshore en Estados Unidos y Argentina que colabora con inversores, empresas tecnol√≥gicas y estudios contables de Latinoam√©rica.

Nos especializamos en ofrecer soluciones para que puedas gestionar tu contabilidad en Estados Unidos de manera segura y confiable, hablando tu mismo idioma y permiti√©ndote trabajar con tranquilidad.
""")




if intencion == "Abrir una LLC":
    conocimiento = st.radio("¬øTen√©s conocimiento previo sobre las LLC en EE.UU.?", ["S√≠", "No"])

    if conocimiento == "No":
        st.markdown("### ¬øQu√© es una LLC y por qu√© puede servirte?")
        st.markdown(
            "- Una **LLC** (Limited Liability Company) es una empresa en EE.UU. que pod√©s abrir sin vivir all√°.\n"
            "- Te permite facturar en d√≥lares, abrir una cuenta bancaria y operar legalmente.\n"
            "- Si no ten√©s actividad en EE.UU., no pag√°s impuestos, pero s√≠ deb√©s declarar anualmente.\n"
            "- Protege tu patrimonio personal y te conecta al sistema financiero global."
        )
        st.markdown("üëâ [Agend√° una llamada sin compromiso](https://calendly.com/financers/llamada)")

    elif conocimiento == "S√≠":
        estado = st.selectbox("¬øEn qu√© estado quer√©s abrirla?", ["", "Florida", "Delaware", "New Mexico", "Wyoming"])
        tipo = st.selectbox("¬øLa manejar√°s solo o con otros socios?", ["", "Single Member", "Multi Member"])

        if estado and tipo:
            key = f"llc_{estado.lower().replace(' ', '_')}_{tipo.lower().split()[0]}"
            if key in respuestas:
                st.markdown("### Resultado")
                st.markdown(respuestas[key])

elif intencion == "Declarar impuestos":
    tiene_llc = st.radio("¬øYa ten√©s una LLC formada?", ["S√≠", "No"])
    if tiene_llc == "S√≠":
        st.markdown("¬øPod√©s confirmarme lo siguiente?")
        estado = st.selectbox("¬øEn qu√© estado est√° registrada tu LLC?", ["", "Florida", "Delaware", "New Mexico", "Wyoming"])
        tipo = st.selectbox("¬øEs Single Member o Multi Member?", ["", "Single Member", "Multi Member"])
        activos = st.radio("¬øTu LLC tiene propiedades, cuentas o activos registrados a su nombre en EE.UU.?", ["S√≠", "No"], help="Ej: inmuebles, autos, cuentas bancarias")

        if activos == "S√≠":
            tipo_activo = st.radio("¬øIncluye propiedades inmobiliarias o real estate?", ["S√≠", "No"])
            if tipo_activo == "S√≠":
                st.markdown("### Atenci√≥n sobre propiedades inmobiliarias")
                st.markdown(
                    "- Si la LLC posee inmuebles en EE.UU., puede aplicar el **Estate Tax** (impuesto a la herencia de hasta 40%) en caso de fallecimiento del titular.\n"
                    "- Recomendamos en estos casos evaluar una **estructura offshore** (como una BVI) que sea due√±a de la LLC para proteger el patrimonio.\n"
                    "- Adem√°s, podr√≠as tributar si los ingresos se consideran **Effectively Connected Income (ECI)**.\n"
                    "\n**Art√≠culo recomendado:** [Estructura para evitar Estate Tax](https://www.financers.com.ar/estructura-en-bvi-para-evitar-el-estate-inheritance-tax-en-usa/)"
                )

        if estado and tipo:
            st.markdown("### Costos y obligaciones para tu declaraci√≥n:")
            if tipo == "Single Member":
                st.markdown("- **Declaraci√≥n ante el IRS:** USD 500")
            else:
                st.markdown("- **Declaraci√≥n ante el IRS:** USD 800")
            if estado == "Florida":
                st.markdown("- Agente registrado: USD 100\n- Impuesto estatal (Sunbiz): USD 139")
            elif estado == "New Mexico":
                st.markdown("- Agente registrado: USD 100\n- Impuesto estatal: USD 0")
            elif estado == "Wyoming":
                st.markdown("- Agente registrado: USD 100\n- Impuesto estatal: USD 62")
            elif estado == "Delaware":
                st.markdown("- Agente registrado: USD 100\n- Franchise Tax: USD 300")

            st.markdown("[Agend√° tu llamada para avanzar](https://calendly.com/financers/llamada)")

    else:
        st.warning("Para declarar impuestos primero deb√©s tener una LLC. Podemos ayudarte con la apertura.")

elif intencion == "Servicios contables":
    st.subheader("Servicios contables adicionales que ofrecemos")
    st.markdown("""
- Certificaci√≥n de balances y estados contables para bancos o visas  
- Presentaci√≥n del BOI ante FinCEN (obligatorio desde 2024)  
- Correcciones de errores en declaraciones pasadas  
- Soporte en casos con herencias, ITIN, o estructura previa
""")
    st.markdown("üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)")

st.markdown("### ¬øUs√°s la LLC para propiedades o real estate?")
st.markdown("""
- Si compr√°s propiedades en EE.UU. a nombre de la LLC, podr√≠as quedar expuesto al impuesto a la herencia (Estate Tax).
- La soluci√≥n ideal es que una sociedad offshore (como una BVI) sea la due√±a de la LLC.
- As√≠, se evita que los activos queden registrados a tu nombre personal ante el IRS.

üëâ Art√≠culo recomendado: [Estructura para evitar Estate Tax](https://www.financers.com.ar/estructura-en-bvi-para-evitar-el-estate-inheritance-tax-en-usa/)
""")

st.markdown("### ¬øUs√°s la LLC para propiedades o real estate?")
st.markdown("""
- Si compr√°s propiedades en EE.UU. a nombre de la LLC, podr√≠as quedar expuesto al impuesto a la herencia (Estate Tax).
- La soluci√≥n ideal es que una sociedad offshore (como una BVI) sea la due√±a de la LLC.
- As√≠, se evita que los activos queden registrados a tu nombre personal ante el IRS.

üëâ Art√≠culo recomendado: [Estructura para evitar Estate Tax](https://www.financers.com.ar/estructura-en-bvi-para-evitar-el-estate-inheritance-tax-en-usa/)
""")

elif intencion == "Solo necesito ayuda bancaria":
    st.subheader("¬°Perfecto! Si ya ten√©s tu LLC + EIN, podemos ayudarte con la cuenta")
    st.markdown("""
Trabajamos con:

- **Relay Financial** (cuenta en USD, sin presencialidad, tarjetas f√≠sicas y virtuales)
- **Mercury Bank**
- Bancos f√≠sicos como OceanBank o International Finance Bank (dep√≥sito m√≠nimo requerido)

üëâ [Agend√° tu llamada y lo resolvemos](https://calendly.com/financers/llamada)
""")


elif intencion == "Ya tengo la LLC pero necesito ayuda":
    st.subheader("Podemos ayudarte a regularizar o completar tu estructura")
    st.markdown("""
- Revisi√≥n gratuita de tu estructura actual  
- Declaraci√≥n anual ante IRS  
- BOI obligatorio ante FinCEN  
- Asistencia para cuentas bancarias y cumplimiento

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
""")


elif intencion == "Abrir una cuenta bancaria":
    tiene_llc = st.radio("¬øYa ten√©s una LLC formada con EIN?", ["S√≠", "No"])
    if tiene_llc == "No":
        st.warning("Para abrir una cuenta bancaria necesit√°s una LLC registrada y el EIN. Podemos ayudarte con eso.")
    else:
        st.markdown("Podemos ayudarte a abrir cuentas en:")
        st.markdown("- **Mercury:** 100% online, sin presencialidad")
        st.markdown("- **Relay:** multiusuario, ideal para equipos")
        st.markdown("- **OceanBank o IFB:** desde USD 10.000 a 25.000 de dep√≥sito m√≠nimo ‚Äì Costo de apertura: USD 1500")
        st.markdown("### Resultado")
        st.markdown(respuestas["cuenta_sin_llc"])

elif intencion == "Enviar una consulta personalizada":
    st.subheader("Dejanos tu consulta y te contactamos personalmente")
    nombre = st.text_input("Nombre completo")
    contacto = st.text_input("Correo electr√≥nico o WhatsApp")
    consulta = st.text_area("Escrib√≠ tu consulta")

    if st.button("Enviar consulta"):
        if nombre and contacto and consulta:
            st.success("Gracias. Nuestro equipo se pondr√° en contacto en breve.")
            st.markdown(f"**Resumen:**\n\nNombre: {nombre}\nContacto: {contacto}\nConsulta: {consulta}")
        else:
            st.warning("Por favor complet√° todos los campos.")

elif intencion == "No s√© por d√≥nde empezar":
    st.subheader("¬°Empecemos por lo b√°sico!")

    opciones = {
        "Quiero m√°s informaci√≥n o no s√© bien qu√© necesito": """Hola, buen d√≠a.
Soy Juan Cruz de FINANCERS, un gusto.

Te cuento: ayudamos a emprendedores e inversores latinos a operar legalmente en EE.UU.

¬øTen√©s pensado abrir una empresa, declarar impuestos o necesit√°s ayuda con una cuenta bancaria?
Con una m√≠nima info ya te puedo orientar.""",

        "Vi algo sobre crear una empresa": """Genial.
¬øTen√©s pensado armarla solo o con socios? Eso define si ser√≠a una LLC Single Member o Multi Member.

Y si ya sab√©s en qu√© estado te interesa (New Mexico, Florida, Delaware), te paso el presupuesto detallado y ventajas de cada uno.""",

        "Estoy en otro pa√≠s, ¬øpuedo abrir una cuenta o empresa?": """S√≠, sin problema. No necesit√°s vivir en EE.UU.

Te ayudamos a abrir una empresa 100% online desde tu pa√≠s, obtener el EIN, y abrir la cuenta bancaria con bancos como Mercury o Relay.

¬øQuer√©s que te pase los requisitos y el presupuesto estimado?"""
    }

    seleccion = st.selectbox("Eleg√≠ una pregunta inicial", list(opciones.keys()))
    st.markdown("### Respuesta sugerida")
    st.markdown(opciones[seleccion])


elif intencion == "Preguntas frecuentes":
    st.subheader("Preguntas frecuentes")

    categorias = {
        "Apertura de LLC": [
            ("¬øEn qu√© estado me conviene crear la LLC?",
             """Depende del objetivo de tu negocio:

- **New Mexico** es ideal si busc√°s privacidad, bajo costo y no necesit√°s una imagen corporativa reconocida.
- **Florida** es excelente si vas a invertir en inmuebles, operar con cuentas bancarias locales o necesit√°s tener presencia en un estado comercialmente activo.
- **Delaware** es el m√°s prestigioso desde el punto de vista legal. Muy recomendado para startups, empresas tecnol√≥gicas o si vas a levantar capital o tener inversores.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øQu√© incluye el servicio de apertura?",
             """Nuestro servicio incluye:

- Registro legal de la LLC ante el estado correspondiente
- Obtenci√≥n del EIN (n√∫mero de identificaci√≥n fiscal) ante el IRS
- Alta del agente registrado (Registered Agent)
- Operating Agreement
- Presentaci√≥n del BOI (Beneficial Ownership Information)
- Asistencia para apertura de cuenta bancaria
- Asesor√≠a en espa√±ol durante todo el proceso

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øQu√© significa ser Single Member o Multi Member?",
             """- **Single Member (SM):** una sola persona como titular. Declaraci√≥n m√°s simple (formulario 5472). Menor costo de mantenimiento.
- **Multi Member (MM):** dos o m√°s socios. Requiere presentaci√≥n del formulario 1065 + K-1. √ötil para cuentas compartidas o responsabilidades divididas.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øLa LLC permite recibir pagos internacionales?",
             """S√≠. Con tu LLC pod√©s recibir pagos desde cualquier parte del mundo. Plataformas como Stripe, Wise, Payoneer, Deel, Binance, etc. son compatibles.

Tambi√©n pod√©s emitir facturas a clientes internacionales y operar como proveedor global.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øQu√© costo tiene abrir una LLC?",
             """Depende del estado y tipo de estructura:

- New Mexico SM: desde USD 700
- Florida SM: USD 1000 (m√°s RA y Sunbiz)
- Delaware SM: USD 1300 (m√°s Franchise Tax de USD 300)

Todos incluyen la cuenta bancaria y presentaci√≥n BOI.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
""")
        ],
        "Estate Tax y estructuras offshore": [
            ("¬øQu√© es el Estate Tax y cu√°ndo aplica?",
             """El Estate Tax es un impuesto a la herencia que puede alcanzar hasta el 40% sobre el valor de los activos que un extranjero posea directamente en EE.UU., como propiedades a nombre de una LLC. Si el titular fallece sin una estructura que lo proteja, sus herederos podr√≠an enfrentar esta carga fiscal. Para evitarlo, se recomienda crear una sociedad offshore (como una BVI) que sea la propietaria de la LLC.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øQu√© tipo de offshore recomiendan?",
             """La estructura m√°s utilizada por nuestros clientes es una sociedad en las Islas V√≠rgenes Brit√°nicas (BVI). Esta entidad es confidencial, √°gil de constituir, y permite que vos seas el beneficiario final sin figurar directamente en EE.UU. Es ideal para propietarios de inmuebles o cuentas bancarias que quieren reducir riesgos legales y fiscales.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øPuedo usar una offshore para proteger activos?",
             """S√≠. Muchas veces se crea una BVI como holding que controla la LLC estadounidense. Esto no s√≥lo evita el Estate Tax, sino que brinda una capa adicional de privacidad y planificaci√≥n fiscal. Es legal, transparente, y muy com√∫n en estructuras de no residentes.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øEs obligatorio usar offshore si tengo propiedades?",
             """No es obligatorio, pero s√≠ altamente recomendable si el valor de los activos supera los USD 60.000. Por encima de ese umbral, el IRS podr√≠a aplicar el Estate Tax. Si quer√©s evitar riesgos a largo plazo, es mejor prevenir con una estructura adecuada.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øLa offshore paga impuestos?",
             """No. Una sociedad offshore como BVI no paga impuestos en su pa√≠s de incorporaci√≥n ni en EE.UU. si no opera directamente all√≠. Su funci√≥n es de control y tenencia, no de operaci√≥n directa.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
""")
        ],
        
        "Declaraci√≥n de impuestos": [
            ("¬øDebo declarar si la LLC no tuvo movimientos?",
             """S√≠. Toda LLC con EIN est√° obligada a presentar declaraci√≥n anual.

- SM: formularios 1120 + 5472
- MM: formulario 1065 + K-1 para cada socio

No declarar puede implicar multas de hasta USD 25.000.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øCu√°l es el costo de la declaraci√≥n anual?",
             """- SM: USD 500
- MM: USD 800

Adem√°s, sum√°:
- RA: USD 100
- Estado: FL (139), DE (300), NM (0), WY (62)

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øQu√© es el RA, Sunbiz o Franchise Tax?",
             """- **RA:** agente registrado (USD 100/a√±o)
- **Sunbiz:** registro estatal obligatorio en Florida (USD 139)
- **Franchise Tax:** impuesto anual de Delaware (USD 300)

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øPuedo pagarme un sueldo desde la LLC?",
             """Si no sos residente fiscal en EE.UU., pod√©s hacer transferencias personales como retiro de utilidades.

Si sos residente o ten√©s actividad f√≠sica all√°, necesit√°s registrarte como empleador.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øC√≥mo declaro en Argentina los ingresos desde la LLC?",
             """Se declaran como ingresos de fuente extranjera en el Impuesto a las Ganancias.

Tambi√©n pueden estar alcanzados por Bienes Personales. Consult√° con tu contador local.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
""")
        ],
        "Cuenta bancaria": [
            ("¬øQu√© banco recomiendan?",
             """Usamos Relay Financial como primera opci√≥n:

- 100% online
- Multiusuario
- Recibe pagos de Stripe, Wise, Deel, Payoneer
- No requiere residencia en EE.UU.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øPuedo abrir una cuenta como extranjero?",
             """S√≠. No necesit√°s visa ni estar en EE.UU.

Solo necesit√°s:
- LLC activa
- EIN
- Documentaci√≥n societaria
- Pasaporte vigente

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øQu√© necesito para abrir la cuenta?",
             """- LLC registrada
- EIN emitido
- Articles of Organization + Operating Agreement
- Pasaporte
- Formulario KYC del banco

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øPuedo transferir fondos desde Argentina u otros pa√≠ses?",
             """S√≠. Relay permite recibir transferencias SWIFT desde el exterior y tambi√©n operar con Wise, Payoneer, etc.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
"""),
            ("¬øQu√© pasa si no puedo completar el onboarding?",
             """Nuestro equipo te ayuda a corregir errores y reintentar. Si Relay no aprueba, usamos Mercury, IFB u otras opciones.

üëâ [Agend√° tu llamada](https://calendly.com/financers/llamada)
""")
        ]
    }

    seccion = st.selectbox("Seleccion√° una categor√≠a", list(categorias.keys()))
    preguntas = [p[0] for p in categorias[seccion]]
    seleccion = st.selectbox("Seleccion√° una pregunta", preguntas)

    for pregunta, respuesta in categorias[seccion]:
        if pregunta == seleccion:
            st.markdown(f"### {pregunta}")
            st.markdown(respuesta)
            break

# Nota legal al pie
st.markdown("---")
st.markdown("**Importante:** Si no est√°s m√°s de 183 d√≠as en EE.UU., no gener√°s ingresos conectados (ECI) ni ingresos de fuente estadounidense, no deb√©s tributar. Aun as√≠, deb√©s presentar tu declaraci√≥n anual ante el IRS.")
st.markdown("**Si ten√©s inmuebles o empleados en EE.UU.**, deber√≠as tributar y lo recomendable ser√≠a una C-Corp (tasa fija del 21%).")


